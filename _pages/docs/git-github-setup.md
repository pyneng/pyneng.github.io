---
title: "Настройка Git и GitHub"
permalink: /docs/git-github-setup/
excerpt: "Git and GitHub setup"
---

Перед началом настройки Git и GitHub, прочитайте [основы Git](https://pyneng.github.io/docs/git-basics/).

> Этот же документ можно [скачать в формате PDF](https://github.com/pyneng/pyneng-online-jun-jul-2017/blob/master/tools/Git_and_GitHub_setup.pdf)

Для работы с заданиями на курсе используются Git и GitHub.

* Git - позволяет хранить историю изменений, кто выполнил изменения и позволяет посмотреть какие именно изменения были внесены.
* GitHub - используется для централизованного хранения файлов. Это дает возможность работать с заданиями из дома или на работе, без необходимости копировать файлы.

Для каждого участника курса создан свой приватный репозиторий на GitHub, доступ к которому есть только у инструктора и участника.

Для выполнения заданий нужны базовые знания Git.
В этом документе описан процесс установки и первичной настройки Git, а также команды, которые необходимы для работы с заданиями.

Далее описана процедура подготовки к курсу.

> Все действия в командной строке выполняются на виртуалке для курса (то есть, если вы подняли виртуалку Debian внутри Windows, то все действия выполняются внутри Debian).

## Подготовка к работе

### Установка Git

Установка Git для Debian/Ubuntu:
```
$ sudo apt-get install git
```

### Первичная настройка Git

Для начала работы с Git необходимо указать имя и email пользователя.
В нашем случае, это пользователь и email, которые вы указали при регистрации на GitHub.

```
$ git config --global user.name "pyneng"
$ git config --global user.email "github_email@gmail.com"
```

Посмотреть настройки можно таким образом:
```
$ git config --list
```

### Аутентификация на GitHub

Для безопасной работы с GitHub, будет использоваться аутентификация по ключам SSH.

Генерация нового SSH ключа (используйте email, который привязан к GitHub):
```
$ ssh-keygen -t rsa -b 4096 -C "github_email@gmail.com"
```

На всех вопросах достаточно нажать enter (более безопасно использовать ключ с passphrase, но можно и без, если нажать enter, при вопросе).

Запуск ssh-agent:
```
$ eval "$(ssh-agent -s)"
```

Добавить ключ в ssh-agent:
```
$ ssh-add ~/.ssh/id_rsa
```

Теперь всё готово со стороны виртуалки и осталось только добавить SSH ключ на GitHub.

Для этого надо скопировать ключ.
Например, таким образом можно отобразить ключ для копирования:
```
$ cat ~/.ssh/id_rsa.pub
```

После копирования, надо перейти на GitHub.

В правом верхнем углу, на любой странице GitHub, нажмите на картинку вашего профиля и в выпадающем списке выберите Settings.
В настройках, в левой панели выберите поле "SSH and GPG keys".

Нажмите "New SSH key".
И в поле "Title" напишите название ключа (например, "Home debian"), а в поле "Key" вставьте содержимое, которое вы скопировали из файла ~/.ssh/id_rsa.pub

> Если GitHub запросит пароль - введите пароль своего акаунта GitHub.


Теперь, чтобы проверить, что всё прошло успешно, попробуйте выполнить команду (в виртуалке):
```
$ ssh -T git@github.com
```

Вывод будет таким:
```
Hi natenka! You've successfully authenticated, but GitHub does not provide shell access.
```

Теперь вы готовы работать с Git и GitHub.

> Если вы будете работать с заданиями с разных виртуалок (например, дома и на работе), надо повторить аналогичную процедуру и для второй виртуалки.

## Копирование репозитория с GitHub

Для выполнения заданий вы будете использовать приватный репозиторий, который создан на GitHub.

Для работы с ним локально, его нужно скопировать.
Для этого используется команда git clone:
```
$ git clone ssh://git@github.com/pyneng/online-2-natasha-samoylenko.git
Cloning into 'online-2-natasha-samoylenko'...
remote: Counting objects: 241, done.
remote: Compressing objects: 100% (191/191), done.
remote: Total 241 (delta 43), reused 239 (delta 41), pack-reused 0
Receiving objects: 100% (241/241), 119.60 KiB | 0 bytes/s, done.
Resolving deltas: 100% (43/43), done.
Checking connectivity... done.
```

В этой команде вам нужно сменить имя репозитория "online-2-natasha-samoylenko" на свой репозиторий.

В итоге, в текущем каталоге, в котором была выполнена команда git clone, появится каталог с именем равным имени репозитория.
В моем случае - online-2-natasha-samoylenko.

Если вы перейдете в этот каталог, то увидите в нем содержимое репозитория на GitHub.

## Работа с репозиторием

Предыдущая команда не просто скопировала репозиторий локально, но и настроила соответствующим образом Git:

* был создан каталог .git
* скачаны все данные репозитория
* скачаны все изменения, которые были в репозитории
* ваш репозиторий на GitHub настроен как remote для этого репозитория

Это значит, что теперь у вас готов полноценный репозиторий Git, в котором вы можете работать.

Обычно, последовательность работы будет такой:

* перед началом работы, синхронизируете локальное содержимое с GitHub командой git pull (синхронизация из GitHub в локальный репозиторий)
* редактируете какие-то файлы репозитория
* добавляете их в staging командой git add
* делаете commit с помощью git commit
* когда вы готовы закачать локальные изменения на GitHub, делаете git push

Если вы работаете с заданиями с работы и дома, надо не забывать первый и последний шаг:

* первый шаг - обновляет ваш локальный репозиторий на виртуалке
* последний шаг - загружает изменения на GitHub

### Синхронизация из GitHub в локальный репозиторий

> Все команды выполняются внутри каталога репозитория (в примере выше - online-2-natasha-samoylenko)

Команда git pull:
```
$ git pull
```

Если содержимое локального репозитория одинаково с удаленным репозиторием - GitHub, вывод будет таким:
```
$ git pull
Already up-to-date.
```

Если что-то было изменено, вывод будет примерно таким:
```
$ git pull
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 5 (delta 4), reused 5 (delta 4), pack-reused 0
Unpacking objects: 100% (5/5), done.
From ssh://github.com/pyneng/online-2-natasha-samoylenko
   89c04b6..fc4c721  master     -> origin/master
Updating 89c04b6..fc4c721
Fast-forward
 exercises/03_data_structures/task_3_3.py | 2 ++
 1 file changed, 2 insertions(+)

```

### Добавление новых файлов или изменений в существующих файлах

Добавление всех новых файлов или изменений в существующих:
```
$ git add .
```

Если необходимо добавить конкретный файл (в данном случае - README.md):
```
$ git add README.md
```

### Commit

При выполнении commit обязательно надо указать сообщение.
Будет лучше, если сообщение будет со смыслом, а не просто "update" или подобное:

```
$ git commit -m "Сделал задания 4.1-4.3"
```

### Push на GitHub

Для загрузки всех локальных изменений на GitHub, используется git push:
```
$ git push origin master
Counting objects: 5, done.
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 426 bytes | 0 bytes/s, done.
Total 5 (delta 4), reused 0 (delta 0)
remote: Resolving deltas: 100% (4/4), completed with 4 local objects.
To ssh://git@github.com/pyneng/online-2-natasha-samoylenko.git
   fc4c721..edcf417  master -> master
```

> Перед выполнением git push, можно выполнить команду ```$ git log -p origin/master..``` - она покажет какие изменения вы собираетесь добавлять в свой репозиторий на GitHub.

## Проверка заданий

При проверке заданий я буду писать комментарии к вашему коду, если какие-то аспекты можно оптимизировать/сделать по-другому.
И буду показывать другие решения этой задачи.

### Сообщение о сдаче заданий

Процесс работы с git, который описан выше, может повторяться для одного раздела курса несколько раз.
Вы будете постепенно выполнять задания и добавлять решения на GitHub.

Когда задания готовы к проверке, вам нужно написать об этом мне.
Сделать это достаточно просто засчет оповещений на GitHub.

Перейдите в ваш репозиторий на GitHub (на главную страницу) и нажмите на последний commit или перейдите на отображение всех commit и там перейдите на последний commmit.


![alt]({{ site.url }}{{ site.baseurl }}/assets/images/repo_marked.png)


В открывшемся commit вы увидите инфорацию о внесенных изменениях и внизу поле для комментария.

![alt]({{ site.url }}{{ site.baseurl }}/assets/images/commit_comment.png)

В этом поле нужно написать комментарий с информацией о том, какие задания сделаны.

> Вам не нужно писать комментарий под каждым commit'ом. Достаточно написать под последним и указать какие задания сделаны.

После этого мне автоматически придет оповещение о комментарии.

### Сообщение о проверенных заданиях

Аналогичным образом будет приходить и оповещение о проверке.

Для получения оповещений от GitHub, вам нужно следить за репозиторием.
Чтобы это включить, надо нажать кнопку "Watch" в вашем репозитории и выбрать вариант "Watching".

![alt]({{ site.url }}{{ site.baseurl }}/assets/images/watch_marked.png)

![alt]({{ site.url }}{{ site.baseurl }}/assets/images/watch_watching.png)


После этого вам на почту будут приходить оповещения, когда я напишу комментарий.


### Как посмотреть проверку

Для проверки заданий, будет создаваться отдельная ветка в репозитории, для каждого раздела курса.
Чтобы посмотреть проверенное задание, нужно будет перейти по ссылке, которая будет отправлена в письме, вместе с информацией о том, что появился комментарий.


![alt]({{ site.url }}{{ site.baseurl }}/assets/images/task_checked_notification.png)


Если перейти по указанной ссылке, будет показан diff между вашим решением и моим ответом.

![alt]({{ site.url }}{{ site.baseurl }}/assets/images/checked_task_diff.png)

Если такой вариант просмотра не удобен, можно переключиться на просмотр обычных файлов из этого же представления.

Чтобы посмотреть конкретный файл, с моими комментариями, нажмите на кнопку "View".

![alt]({{ site.url }}{{ site.baseurl }}/assets/images/checked_task_show_files.png)

А чтобы посмотреть все файлы с проверкой, надо нажать browse files (репозиторий перейдет в корневой каталог и оттуда можно будет перейти к нужному разделу).

![alt]({{ site.url }}{{ site.baseurl }}/assets/images/checked_task_browse_dir.png)


### Вопросы по проверке заданий

Если у вас есть вопросы по проверке заданий, их можно задавать в Slack в личном порядке или в общем чате.
Но, кроме того, GitHub позволяет добавлять комментарии к конкретной строке.

Например, если открыть ту ссылку, которая приходит на почту, с оповещением о проверенных заданиях, и подвести курсор к какой-то строке в diff, можно добавить комментарий к строке.
Должен появиться знак плюс, нажав на который, можно написать комментарий к конкретной строке.

![alt]({{ site.url }}{{ site.baseurl }}/assets/images/checked_task_inline_comment.png)

Комментарий может быть любым, в том числе, можно загрузить к нему какие-то файлы, если нужно.
Например, скриншот того, как результат выглядел у вас, если есть какие-то нюансы.

![alt]({{ site.url }}{{ site.baseurl }}/assets/images/checked_task_inline_comment_write.png)

После добавления комментария, он находится под строкой, к которой он относится.

![alt]({{ site.url }}{{ site.baseurl }}/assets/images/checked_task_inline_comment_done.png)


### Работа с проверенными заданиями

Я проверяю задания в отдельной ветке в вашем репозитории.
Если вы хотите файлы запускать локально, а не только посмотреть проверку на GitHub, надо сделать следующее:
```
git pull
```

Проверьте, что все локальные изменения закоммичены.

Потом переходите в ветку для проверки заданий:
```
$ git checkout task_check
Branch task_check set up to track remote branch task_check from origin.
Switched to a new branch 'task_check'
```

Всё, теперь  у вас в каталоге находятся версии файлов с моей проверкой.
Вы можете с ними работать.

Если вы захотите для себя добавить в проверку какие-то комментарии/объяснения и потом запушить это на github, надо немного поменять команду push (git add и git commit делаются аналогично без изменений):
```
git push origin task_check
```

После этого все изменения находятся на GitHub.

Чтобы перейти назад в дефолтную ветку, в которой вы делали задания, надо сделать:
```
git checkout master
```
